<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce</title>
    <link rel="stylesheet" href="main.css">
    <script>
    let counter=4
    fetch('product.json')
    .then((response) => {
        return response.json()})
    .then( json => {
        initialize(json)})
    .catch(error=>{
        console.log('Error:',error)
    });

    function initialize(products) {
    const category = document.getElementById('category')
    const searchTerm = document.getElementById('search');
    const searchBtn = document.getElementById('searchButton');
    const main = document.querySelector('main');

    searchBtn.onclick = selectCategory;

    function selectCategory(e) {
        e.preventDefault();

        categoryGroup = [];
        finalGroup = [];

        if(category.value === lastCategory && searchTerm.value.trim() === lastSearch) {
            return;
        } else {
            lastCategory = category.value;
            lastSearch = searchTerm.value.trim();

            if(category.value === 'All') {
                categoryGroup = products;
                selectProducts();
            } else {
                if(products.type == category.value){
                    categoryGroup.push(products);
                }
                selectProducts();
            }
        }
    }
}

window.addEventListener('scroll', () => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
    if(clientHeight + scrollTop >= scrollHeight - 3) {
        load();
    }
});
    </script>
</head>
<body>
    <div class="wrap">

        <header>
            <h3>🌼Welcome! 플라워샵입니다.🌼</h3>
        </header>

        <br>

        <nav>
            <ol>
                <li><a link rel="import" href="index.html">메인페이지</a></li>
                <li><a link rel="import" href="login.html">로그인</a></li>
                <li><a link rel="import" href="signup.html">회원가입</a></li>
            </ol>
        </nav>

        <br>

<div class="wrap2">
        <div class="container">
            <p>판매 물품은 4 종류이며, 종류 별로 1 송이 판매와 10 송이 set 할인 판매가 있습니다.</p>
                        <!---->
            <div class="main">
                <aside class="sideBar">
                    <form>
                        <div class="search">
                            <label for="category">꽃 종류를 고르세요. :</label>
                            <select id="category">
                                <option selected>ALL</option>
                                <option>튤립</option>
                                <option>라넌큘러스</option>
                                <option>라벤더</option>
                                <option>겹벚꽃</option>
                            </select>
                        </div>
                        <div class="search">
                            <label for="search">검색 키워드(꽃 종류)를 입력하세요. :</label>
                            <input type="text" id="search">
                        </div>
                        <div class="search">
                            <button id="searchButton">검색 결과 확인하기</button>
                        </div>
                    </form>
                </aside>
                <main class="items">
                </main>
            </div>
            <!---->
            <p>상품 이미지 클릭시 상품 설명을 확인하실 수 있습니다.</p>
                <div class="item360">
                    <img src="튤립.PNG" alt="튤립 사진">
                    
                    <h4>튤립 1송이(회전)</h4>
                </div>
                <div class="item360">
                    <img src="라넌큘러스.PNG" alt="라넌큘러스 사진">
                    
                    <h4>라넌큘러스 1송이(회전)</h4>
                </div>
                <div class="itemsizeup">
                    <img src="라벤더.PNG" alt="라벤더 사진">
                 
                    <h4>라벤더 1송이(확대)</h4>
                </div>
                <div class="itemsizeup">
                    <img src="겹벚꽃.PNG" alt="겹벚꽃 사진">
                   
                    <h4>겹벚꽃 1송이(확대)</h4>
                </div>
                <div class="item360">
                    <img src="튤립.PNG" alt="튤립 사진">
                    
                    <h4>튤립 10송이set(회전)</h4>
                </div>
                <div class="item360">
                    <img src="라넌큘러스.PNG" alt="라넌큘러스 사진">
                    
                    <h4>라넌큘러스 10송이set(회전)</h4>
                </div>
                <div class="itemsizeup">
                    <img src="라벤더.PNG" alt="라벤더 사진">
                 
                    <h4>라벤더 10송이set(확대)</h4>
                </div>
                <div class="itemsizeup">
                    <img src="겹벚꽃.PNG" alt="겹벚꽃 사진">
                   
                    <h4>겹벚꽃 10송이set(확대)</h4>
                </div>
        </div>

        <div class ="info">
            <h2>안녕하세요. 플라워샵입니다.</h2>
            저희 플라워샵은 농약과 화학비료를 사용하지 않고, 특상품만을 고집합니다. 안전 배송으로 건강하게 자란 식물을 만나보실 수 있습니다. 단체 주문 환영합니다.
            식물 특성상 계절에 따라 판매하는 품종이 달라질 수 있으며, 교환 및 환불은 구매 후 일주일 이내로만 가능한 점 양해부탁드립니다. 문의 : 010-0000-0000 (평일 09:00~17:00)
        </div>
   
 </div>   
</body>
</html>